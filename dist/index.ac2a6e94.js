(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))l(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&l(c)}).observe(document,{childList:!0,subtree:!0});function i(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerpolicy&&(r.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?r.credentials="include":e.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(e){if(e.ep)return;e.ep=!0;const r=i(e);fetch(e.href,r)}})();const a={STATUS_GAME:document.querySelector("h1"),FIELD:document.querySelector("section"),CURRENT_PLAYER:document.querySelector("h3")},f={"X move":"X","O move":"O"},E=()=>{const n=Object.keys(f),t=n.indexOf(u);return t>=n.length-1?u=n[0]:u=n[t+1]},L=n=>{var t;return(t=f[n])!=null?t:Object.values(f)[0]};let u=Object.keys(f)[0],y=3,d=3,o=new Array(y).fill(null).map(()=>new Array(y)),T=0;const S=()=>{T++},p=(n,t,i,l)=>{if(!Object.keys(f).includes(i))throw new Error("invalid Player");l[n][t]=i},s=(n,t,i)=>{var l,e;return(e=(l=i[n])==null?void 0:l[t])!=null?e:null},m={draw(){a.STATUS_GAME.innerHTML="DRAW",a.FIELD.innerHTML=""},victory(n){a.STATUS_GAME.innerHTML="The winner is:"+n},field(n){a.CURRENT_PLAYER.innerHTML=n;const t=document.querySelector("section");t.innerHTML="";for(let i=0;i<y;i++)for(let l=0;l<y;l++){let e=document.createElement("div"),r=s(i,l,o);r!==null&&(e.innerHTML=L(r),e.className="active"),e.isGameCell=!0,e.cellX=i,e.cellY=l,e.field=o,t.appendChild(e)}}},h={isOver:!1,winner:null,setGameStatus(n,t){this.isOver=n,this.winner=t}},O=n=>n===d*d,g=(n,t)=>{let i=s(n,t,o),l={h:0,v:0,d1:0,d2:0},e={h:0,v:0,d1:0,d2:0};for(let r=0;r<d*2-1;r++){let c=n-d+r+1,v=t-d+r+1;i===s(c,v,o)?(e.d1+=1,e.d1>l.d1&&(l.d1=e.d1)):e.d1=0,i===s(c,t,o)?(e.h+=1,e.h>l.h&&(l.h=e.h)):e.h=0,i===s(n,v,o)?(e.v+=1,e.v>l.v&&(l.v=e.v)):e.v=0,i===s(c,t+d-r-1,o)?(e.d2+=1,e.d2>l.d2&&(l.d2=e.d2)):e.d2=0}return l},A=(n,t)=>{let i=g(n,t);for(let l in i)if(i[l]>=d){h.setGameStatus(!0,s(n,t,o));return}};document.addEventListener("click",function(n){let t=n.target;!t.isGameCell||s(t.cellX,t.cellY,t.field)!==null||(p(t.cellX,t.cellY,u,t.field),S(),E(),m.field(u),A(t.cellX,t.cellY),h.isOver&&m.victory(h.winner),O(T)&&m.draw())});m.field(u);
